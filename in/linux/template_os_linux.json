{
    "templates": [
        {
            "zbxVer": "4.2",
            "name": "Template OS Linux Zabbix agent",
            "classes": [
                "OS",
                "PERFORMANCE"
            ],
            "description": "Official Linux template. Requires agent of Zabbix 3.0.14, 3.4.5 and 4.0.0 or newer.",
            "discoveryRules": [
                {
                    "name": "Mounted filesystem discovery",
                    "key": "vfs.fs.discovery",
                    "type": "ZABBIX_AGENT",
                    "description": "Discovery of file systems of different types as defined in global regular expression \"File systems for discovery\".",
                    "filter": {
                        "evalType":"AND",
                        "conditions":[
                            {
                                "macro":"{#FSTYPE}",
                                "value":"@File systems for discovery",
                                "operator":"8",
                                "formulaid":"A"
                            }
                        ],
                    },
                    "metrics":[
                            {
                                "prototype": "vfs.fs.used",
                                "type": "ZABBIX_AGENT",
                                "key": "vfs.fs.size[{#FSNAME},used]",
                                "group": "Filesystems",
                                "alarmObject": "{#FSNAME}",
                                "application_prototype": "Filesystem __ALARM_OBJECT__"
                            },
                            {
                                "prototype": "vfs.fs.free",
                                "type": "ZABBIX_AGENT",
                                "key": "vfs.fs.size[{#FSNAME},free]",
                                "group": "Filesystems",
                                "alarmObject": "{#FSNAME}",
                                "application_prototype": "Filesystem __ALARM_OBJECT__"
                            },
                            {
                                "prototype": "vfs.fs.total",
                                "type": "ZABBIX_AGENT",
                                "key": "vfs.fs.size[{#FSNAME},total]",
                                "group": "Filesystems",
                                "alarmObject": "{#FSNAME}",
                                "application_prototype": "Filesystem __ALARM_OBJECT__"
                            },
                            {
                                "prototype": "vfs.fs.pused",
                                "type": "ZABBIX_AGENT",
                                "key": "vfs.fs.size[{#FSNAME},pused]",
                                "group": "Filesystems",
                                "alarmObject": "{#FSNAME}",
                                "application_prototype": "Filesystem __ALARM_OBJECT__"
                            }
                    ]
                }
                
            ],
            "metrics": [
                //CPU
                {
                    "prototype": "system.cpu.load.avg1",
                    "key": "system.cpu.load[percpu,avg1]",
                    "type": "ZABBIX_AGENT",
                    "name": "Load average (1m avg per core)",
                    "description": "The load average is calculated as system CPU load divided by number of CPU cores.",
                    "triggers":[{
                        "id": "trigger.cpu.load.warn",
                        "name": "Load average is too high",
                        "expression":"{TEMPLATE_NAME:METRIC.avg(5m)}>{$LOAD_AVG_CRIT}",
                        "priority": 3
                    }]
                },
                {
                    "prototype": "system.cpu.load.avg5",
                    "key": "system.cpu.load[percpu,avg5]",
                    "type": "ZABBIX_AGENT",
                    "name": "Load average (5m avg per core)",
                    "description": "The load average is calculated as system CPU load divided by number of CPU cores."
                },
                {
                    "prototype": "system.cpu.load.avg15",
                    "key": "system.cpu.load[percpu,avg15]",
                    "type": "ZABBIX_AGENT",
                    "name": "Load average (15m avg per core)",
                    "description": "The load average is calculated as system CPU load divided by number of CPU cores."
                },
                {
                    "prototype": "system.cpu.util",
                    "type": "DEPENDENT_ITEM",
                    "masterItem": "system.cpu.idle",
                    "key": "system.cpu.util",
                    "preprocessing": [
                        {
                            "type": "JAVASCRIPT",
                            "params": "//Calculate utilization\nreturn (100 - value)"
                        },
                    ],
                    "triggers": []
                },
                {
                    "prototype": "system.cpu.idle",
                    "key": "system.cpu.util[,idle]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.system",
                    "key": "system.cpu.util[,system]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.user",
                    "key": "system.cpu.util[,user]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.nice",
                    "key": "system.cpu.util[,nice]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.iowait",
                    "key": "system.cpu.util[,iowait]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.steal",
                    "key": "system.cpu.util[,steal]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.interrupt",
                    "key": "system.cpu.util[,interrupt]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.softirq",
                    "key": "system.cpu.util[,softirq]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.guest",
                    "key": "system.cpu.util[,guest]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.guest_nice",
                    "key": "system.cpu.util[,guest_nice]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.cpu.switches",
                    "key": "system.cpu.switches",
                    "type": "ZABBIX_AGENT",
                    "preprocessing": [
                        {
                            "type": "CHANGE_PER_SECOND"
                        }
                    ]
                },
                {
                    "prototype": "system.cpu.intr",
                    "key": "system.cpu.intr",
                    "type": "ZABBIX_AGENT",
                    "preprocessing": [
                        {
                            "type": "CHANGE_PER_SECOND"
                        }
                    ]
                },
                //MEMORY
                {
                    "prototype": "vm.memory.total",
                    "key": "vm.memory.size[total]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "vm.memory.available",
                    "key": "vm.memory.size[available]",
                    "type": "ZABBIX_AGENT"
                },
                //SWAP,
                {
                    "prototype": "system.swap.total",
                    "key": "system.swap.size[,total]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.swap.free",
                    "key": "system.swap.size[,free]",
                    "type": "ZABBIX_AGENT"
                },
                {
                    "prototype": "system.swap.pfree",
                    "key": "system.swap.size[,pfree]",
                    "type": "ZABBIX_AGENT"
                }

            ],
            "macros": [
                {
                    "macro": "{$LOAD_AVG_CRIT}",
                    "value": "1.5"
                }
            ]
        }
    ]
}