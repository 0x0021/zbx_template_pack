templates:
    - name: Template OS Linux
      description: Template OS Linux
      _classes:
        - Interfaces EtherLike Extension
        - OS
        - SNMPv2
        - SNMP_DEVICE
        - INTERFACES
      metrics:
        - prototype: system.cpu.load.avg1
          oid: "1.3.6.1.4.1.2021.10.1.3[\"index\",\"1.3.6.1.4.1.2021.10.1.2\", \"Load-1\"]"
          type: SNMP
          snmpObject: laLoad.1
          mib: UCD-SNMP-MIB
          zbxVer: "4.2"
        - prototype: system.cpu.load.avg5
          oid: "1.3.6.1.4.1.2021.10.1.3[\"index\",\"1.3.6.1.4.1.2021.10.1.2\", \"Load-5\"]"
          type: SNMP
          snmpObject: laLoad.2
          mib: UCD-SNMP-MIB
          zbxVer: "4.2"
        - prototype: system.cpu.load.avg15
          oid: "1.3.6.1.4.1.2021.10.1.3[\"index\",\"1.3.6.1.4.1.2021.10.1.2\", \"Load-15\"]"
          type: SNMP
          snmpObject: laLoad.3
          mib: UCD-SNMP-MIB
          zbxVer: "4.2"
        - prototype: system.cpu.num
          oid: discovery[{#SNMPVALUE},1.3.6.1.2.1.25.3.3.1.1]
          type: SNMP
          key: snmp.system.cpu.num
          mib: HOST-RESOURCES-MIB
          zbxVer: "4.2"
          preprocessing:
            - type: JAVASCRIPT
              params: |
                //count the number of cores
                return JSON.parse(value).length;
          vendorDescription: Count the number of CPU cores by counting number of cores discovered in hrProcessorTable using LLD
        - prototype: "system.cpu.intr"
          type: SNMP
          snmpObject: ssRawInterrupts.0
          oid: 1.3.6.1.4.1.2021.11.59.0
          preprocessing:
            - type: CHANGE_PER_SECOND
        - prototype: "system.cpu.switches"
          type: SNMP
          snmpObject: ssRawContexts.0
          oid: 1.3.6.1.4.1.2021.11.60.0
          preprocessing:
            - type: CHANGE_PER_SECOND
        - prototype: system.swap.total
          oid: 1.3.6.1.4.1.2021.4.3.0
          type: SNMP
          snmpObject: memTotalSwap.0
          mib: UCD-SNMP-MIB
          vendorDescription: The total amount of swap space configured for this host.
          preprocessing:
            - type: MULTIPLIER
              params: "1024"
        - prototype: system.swap.free
          oid: 1.3.6.1.4.1.2021.4.4.0
          type: SNMP
          snmpObject: memAvailSwap.0
          mib: UCD-SNMP-MIB
          vendorDescription: The amount of swap space currently unused or available.
          preprocessing:
            - type: MULTIPLIER
              params: "1024"
        - prototype: system.swap.pfree
          key: snmp.system.swap.pfree
          type: CALCULATED

      templates:
        - Template Module HOST-RESOURCES-MIB SNMPvX