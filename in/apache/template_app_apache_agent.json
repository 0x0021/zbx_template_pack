{
    "templates": [
        {
            "name": "Template App Apache Zabbix agent",
            "_zbx_ver": "3.4",
            "classes": [
                "APP"
            ],
            "description": "Get metrics from mod_status module using Zabbix agent.\nhttps://httpd.apache.org/docs/current/mod/mod_status.html",
            "metrics": [
                {
                    "prototype": "apache.get_stub_status",
                    "type": "ZABBIX_AGENT",
                    "_zbx_ver": "3.4",
                    "key": "web.page.get[{$APACHE_STATUS_HOST},{$APACHE_STATUS_PATH},{$APACHE_STATUS_PORT}]",
                    "triggers": [
                        {
                            "prototype": "trigger.http_get",
                            "name": "Failed to fetch Apache stub status page",
                            "url": "https://httpd.apache.org/docs/current/mod/mod_status.html"
                        }
                    ]
                },
                {
                    "prototype": "apache.bytes_per_second"
                },
                {
                    "prototype": "apache.connections.async_closing"
                },
                {
                    "prototype": "apache.connections.async_keep_alive"
                },
                {
                    "prototype": "apache.connections.async_writing"
                },
                {
                    "prototype": "apache.connections.total"
                },
                {
                    "prototype": "apache.requests.total.rate"
                },
                {
                    "prototype": "apache.requests.total"
                },
                {
                    "prototype": "apache.uptime"
                },
                {
                    "prototype": "apache.version"
                },
                {
                    "prototype": "apache.workers.busy"
                },
                {
                    "prototype": "apache.workers.idle"
                },
                {
                    "id": "apache.proc.num",
                    "prototype": "proc.num",
                    "key": "proc.num[{$APACHE_PROC_NAME}]",
                    "group": "Apache",
                    "resource": "Apache"
                },
                {
                    "id": "apache.proc.mem.rss",
                    "prototype": "proc.mem.rss",
                    "key": "proc.mem[{$APACHE_PROC_NAME},,,,rss]",
                    "group": "Apache",
                    "resource": "Apache"
                },
                {
                    "id": "apache.proc.mem.vsize",
                    "prototype": "proc.mem.vsize",
                    "key": "proc.mem[{$APACHE_PROC_NAME},,,,vsize]",
                    "group": "Apache",
                    "resource": "Apache"
                },
                {
                    "id": "apache.proc.cpu.util",
                    "prototype": "proc.cpu.util",
                    "key": "proc.cpu.util[{$APACHE_PROC_NAME}]",
                    "group": "Apache",
                    "resource": "Apache"
                }
            ],
            "macros": [
                {
                    "macro": "{$APACHE_STATUS_HOST}",
                    "value": "localhost"
                },
                {
                    "macro": "{$APACHE_STATUS_PATH}",
                    "value": "server-status?auto"
                },
                {
                    "macro": "{$APACHE_STATUS_PORT}",
                    "value": "80"
                },
                {
                    "macro": "{$APACHE_PROC_NAME}",
                    "value": "httpd"
                    //since it might be apache2
                }
            ]
        }
    ]
}