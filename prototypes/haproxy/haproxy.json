[
    {
        "_id": "haproxy.get",
        "name": "Get stats",
        "key": "haproxy.get",
        "value_type": "TEXT",
        "update": "1m",
        "history": "1h",
        "_group": "Zabbix_raw_items",
        "_resource": "HAProxy",
        "description": "HAProxy Statistics Report in CSV format",
        "preprocessing": [
            {
                "type": "JAVASCRIPT",
                "params": "return value.slice(2,-1)"
            },
            {
                "type": "CSV_TO_JSON",
                "params": "\n\n1"
            }
        ]
    },
    {
        "_id": "haproxy.backend.status",
        "name": "{#PXNAME} {#SVNAME} status",
        "type": "DEPENDENT",
        "key": "haproxy.backend.status.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "CHAR",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].status.first()"
            }
        ]
    },
    {
        "_id": "haproxy.backend.rtime",
        "name": "{#PXNAME} {#SVNAME} rtime",
        "type": "DEPENDENT",
        "key": "haproxy.backend.rtime.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Average backend response time (in ms) for the last 1,024 requests",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].rtime.first()"
            }
        ]
    },
    {
        "_id": "haproxy.backend.econ",
        "name": "{#PXNAME} {#SVNAME} econ",
        "type": "DEPENDENT",
        "key": "haproxy.backend.econ.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of requests that encountered an error attempting to connect to a backend server",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].econ.first()"
            }
        ]
    },
    {
        "_id": "haproxy.backend.dresp",
        "name": "{#PXNAME} {#SVNAME} dresp",
        "type": "DEPENDENT",
        "key": "haproxy.backend.dresp.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Responses denied due to security concerns (ACL-restricted)",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].dresp.first()"
            }
        ]
    },
    {
        "_id": "haproxy.backend.eresp",
        "name": "{#PXNAME} {#SVNAME} eresp",
        "type": "DEPENDENT",
        "key": "haproxy.backend.eresp.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of requests whose responses yielded an error",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].eresp.first()"
            }
        ]
    },
    {
        "_id": "haproxy.backend.qcur",
        "name": "{#PXNAME} {#SVNAME} qcur",
        "type": "DEPENDENT",
        "key": "haproxy.backend.qcur.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Current number of requests unassigned in queue",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].qcur.first()"
            }
        ],
        "triggers": [
            {
                "_id": "trigger.backend.qcur",
                "name": "Current number of requests unassigned in queue more than {$HAPROXY.BACK_QCUR.MAX.WARN}",
                "priority": "WARNING",
                "expression": "{TEMPLATE_NAME:METRIC.min(5m)}>{$HAPROXY.BACK_QCUR.MAX.WARN}",
                "description": "Current number of requests unassigned in queue more than {$HAPROXY.BACK_QCUR.MAX.WARN}."
            }
        ]
    },
    {
        "_id": "haproxy.backend.qtime",
        "name": "{#PXNAME} {#SVNAME} qtime",
        "type": "DEPENDENT",
        "key": "haproxy.backend.qtime.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Average time spent in queue (in ms) for the last 1,024 requests",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].qtime.first()"
            }
        ]
    },
    {
        "_id": "haproxy.backend.wredis",
        "name": "{#PXNAME} {#SVNAME} wredis",
        "type": "DEPENDENT",
        "key": "haproxy.backend.wredis.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of times a request was redispatched to a different backend",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].wredis.first()"
            }
        ]
    },
    {
        "_id": "haproxy.backend.wretr",
        "name": "{#PXNAME} {#SVNAME} wretr",
        "type": "DEPENDENT",
        "key": "haproxy.backend.wretr.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of times a connection was retried",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].wretr.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.status",
        "name": "{#PXNAME} {#SVNAME} status",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.status.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "CHAR",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].status.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.req_rate",
        "name": "{#PXNAME} {#SVNAME} req_rate",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.req_rate.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "HTTP requests per second",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].req_rate.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.rate",
        "name": "{#PXNAME} {#SVNAME} rate",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.rate.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of sessions created per second",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].rate.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.ereq",
        "name": "{#PXNAME} {#SVNAME} ereq",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.ereq.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of request errors",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].ereq.first()"
            }
        ],
        "triggers": [
            {
                "_id": "trigger.frontend.ereq",
                "name": "Number of request errors more than {$HAPROXY.FRONT_EREQ.MAX.WARN}",
                "priority": "WARNING",
                "expression": "{TEMPLATE_NAME:METRIC.min(5m)}>{$HAPROXY.FRONT_EREQ.MAX.WARN}",
                "description": "Number of request errors more than {$HAPROXY.FRONT_EREQ.MAX.WARN}."
            }
        ]
    },
    {
        "_id": "haproxy.frontend.dreq",
        "name": "{#PXNAME} {#SVNAME} dreq",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.dreq.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Requests denied due to security concerns (ACL-restricted)",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].dreq.first()"
            }
        ],
        "triggers": [
            {
                "_id": "trigger.frontend.dreq",
                "name": "Number of requests denied more than {$HAPROXY.FRONT_DREQ.MAX.WARN}",
                "priority": "WARNING",
                "expression": "{TEMPLATE_NAME:METRIC.min(5m)}>{$HAPROXY.FRONT_DREQ.MAX.WARN}",
                "description": "Number of requests denied due to security concerns (ACL-restricted) more than {$HAPROXY.FRONT_DREQ.MAX.WARN}."
            }
        ]
    },
    {
        "_id": "haproxy.frontend.hrsp_1xx",
        "name": "{#PXNAME} {#SVNAME} hrsp_1xx",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.hrsp_1xx.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].hrsp_1xx.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.hrsp_2xx",
        "name": "{#PXNAME} {#SVNAME} hrsp_2xx",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.hrsp_2xx.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].hrsp_2xx.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.hrsp_3xx",
        "name": "{#PXNAME} {#SVNAME} hrsp_3xx",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.hrsp_3xx.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].hrsp_3xx.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.hrsp_4xx",
        "name": "{#PXNAME} {#SVNAME} hrsp_4xx",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.hrsp_4xx.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of HTTP client errors",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].hrsp_4xx.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.hrsp_5xx",
        "name": "{#PXNAME} {#SVNAME} hrsp_5xx",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.hrsp_5xx.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of HTTP server errors",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].hrsp_5xx.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.bin",
        "name": "{#PXNAME} {#SVNAME} bin",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.bin.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of bytes received by the frontend",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].bin.first()"
            }
        ]
    },
    {
        "_id": "haproxy.frontend.bout",
        "name": "{#PXNAME} {#SVNAME} bout",
        "type": "DEPENDENT",
        "key": "haproxy.frontend.bout.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of bytes sent by the frontend",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].bout.first()"
            }
        ]
    },
    {
        "_id": "haproxy.server.status",
        "name": "{#PXNAME} {#SVNAME} status",
        "type": "DEPENDENT",
        "key": "haproxy.server.status.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "CHAR",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].status.first()"
            }
        ]
    },
    {
        "_id": "haproxy.server.rtime",
        "name": "{#PXNAME} {#SVNAME} rtime",
        "type": "DEPENDENT",
        "key": "haproxy.server.rtime.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Average server response time (in ms) for the last 1,024 requests",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].rtime.first()"
            }
        ],
        "triggers": [
            {
                "_id": "trigger.server.rtime",
                "name": "Average server response time on {#PXNAME}:{#SVNAME} more than {$HAPROXY.SERVER_RTIME.MAX.WARN}",
                "priority": "WARNING",
                "expression": "{TEMPLATE_NAME:METRIC.min(5m)}>{$HAPROXY.SERVER_RTIME.MAX.WARN}",
                "description": "Average server response time (in ms) for the last 1,024 requests more than {$HAPROXY.SERVER_RTIME.MAX.WARN}."
            }
        ]
    },
    {
        "_id": "haproxy.server.econ",
        "name": "{#PXNAME} {#SVNAME} econ",
        "type": "DEPENDENT",
        "key": "haproxy.server.econ.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of requests that encountered an error attempting to connect to a backend server",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].econ.first()"
            }
        ]
    },
    {
        "_id": "haproxy.server.dresp",
        "name": "{#PXNAME} {#SVNAME} dresp",
        "type": "DEPENDENT",
        "key": "haproxy.server.dresp.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Responses denied due to security concerns (ACL-restricted)",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].dresp.first()"
            }
        ]
    },
    {
        "_id": "haproxy.server.eresp",
        "name": "{#PXNAME} {#SVNAME} eresp",
        "type": "DEPENDENT",
        "key": "haproxy.server.eresp.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of requests whose responses yielded an error",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].eresp.first()"
            }
        ],
        "triggers": [
            {
                "_id": "trigger.server.eresp",
                "name": "Number of responses with error on {#PXNAME}:{#SVNAME} more than {$HAPROXY.SERVER_ERESP.MAX.WARN}",
                "priority": "WARNING",
                "expression": "{TEMPLATE_NAME:METRIC.min(5m)}>{$HAPROXY.SERVER_ERESP.MAX.WARN}",
                "description": "Number of requests on server, whose responses yielded an error, more than {$HAPROXY.SERVER_ERESP.MAX.WARN}."
            }
        ]
    },
    {
        "_id": "haproxy.server.qcur",
        "name": "{#PXNAME} {#SVNAME} qcur",
        "type": "DEPENDENT",
        "key": "haproxy.server.qcur.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Current number of requests unassigned in queue",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].qcur.first()"
            }
        ],
        "triggers": [
            {
                "_id": "trigger.server.qcur",
                "name": "Current number of requests on {#PXNAME}:{#SVNAME} unassigned in queue more than {$HAPROXY.SERVER_QCUR.MAX.WARN}",
                "priority": "WARNING",
                "expression": "{TEMPLATE_NAME:METRIC.min(5m)}>{$HAPROXY.SERVER_QCUR.MAX.WARN}",
                "description": "Current number of requests unassigned in queue more than {$HAPROXY.SERVER_QCUR.MAX.WARN}."
            }
        ]
    },
    {
        "_id": "haproxy.server.qtime",
        "name": "{#PXNAME} {#SVNAME} qtime",
        "type": "DEPENDENT",
        "key": "haproxy.server.qtime.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Average time spent in queue (in ms) for the last 1,024 requests",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].qtime.first()"
            }
        ],
        "triggers": [
            {
                "_id": "trigger.server.qtime",
                "name": "Average time spent in queue on {#PXNAME}:{#SVNAME} more than {$HAPROXY.SERVER_QTIME.MAX.WARN}",
                "priority": "WARNING",
                "expression": "{TEMPLATE_NAME:METRIC.min(5m)}>{$HAPROXY.SERVER_QTIME.MAX.WARN}",
                "description": "Average time spent in queue (in ms) for the last 1,024 requests more than {$HAPROXY.SERVER_QTIME.MAX.WARN}."
            }
        ]
    },
    {
        "_id": "haproxy.server.wredis",
        "name": "{#PXNAME} {#SVNAME} wredis",
        "type": "DEPENDENT",
        "key": "haproxy.server.wredis.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of times a request was redispatched to a different backend",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].wredis.first()"
            }
        ]
    },
    {
        "_id": "haproxy.server.wretr",
        "name": "{#PXNAME} {#SVNAME} wretr",
        "type": "DEPENDENT",
        "key": "haproxy.server.wretr.[{#PXNAME}:{#SVNAME}]",
        "master_item": "haproxy.get",
        "value_type": "UNSIGNED",
        "_group": "HAProxy",
        "_resource": "HAProxy",
        "description": "Number of times a connection was retried",
        "preprocessing": [
            {
                "type": "JSONPATH",
                "params": "$.[?(@.pxname == '{#PXNAME}' && @.svname == '{#SVNAME}')].wretr.first()"
            }
        ]
    }
]